#####################################################################################################################
#  
#  ansible-playbook -i inventory/password.ini playbooks/postgresql/install_postgresql_single.yml -e "pg_version=16"
#
#####################################################################################################################

---
- name: download and install POSTGRESQL
  hosts: "{{ hosts }}"
  become: yes
  vars_prompt:
    - name: method
      prompt: "Choose install method: \n1 - in server\n2 - in docker\n"
      private: no 

  tasks:
    - name: check role 
      fail: 
        msg: "ERROR: You should chose only one method (1, 2)."
      when: method not in ['1', '2']

    - name: server
      when: method == '1'
      block:
        - name: one
          include_role:
            name: install_postgresql
        - name: two                 
          include_role:             
            name: postgresql_basic_setup

    - name: docker
      when: method == '2'
      block:
        - name: one
          include_role:
            name: install_minio_docker
        - name: two
          include_role:
            name: basic_setup_minio_docker
 